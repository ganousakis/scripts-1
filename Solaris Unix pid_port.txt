#!/bin/bash

line='+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-'
pids=$(/usr/bin/ps -ef | sed 1d | awk '{print $2}')

echo "Start Searching for Port $1"

for f in $pids
do
   /usr/proc/bin/pfiles "$f" 2>/dev/null | /usr/xpg4/bin/grep -q "port: $1"
   if [ $? -eq 0 ]; then
      echo $line
      echo "Port: $1 is being used by PID:\c"
      /usr/bin/ps -ef -o pid -o args | egrep -v "grep|pfiles" | grep "$f"
   fi
done

